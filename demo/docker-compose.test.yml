services:
  test:
    image: eclipse-temurin:21-jdk
    working_dir: /workspace
    volumes:
      - ./:/workspace
      - gradle-cache:/root/.gradle
    command: bash -lc "chmod +x ./gradlew && ./gradlew test --no-daemon --console=plain --stacktrace -Dorg.gradle.workers.max=1"

volumes:
  gradle-cache:
