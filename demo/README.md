# 📷 PhotoProject

> **"기능 구현을 넘어, 대규모 트래픽과 동시성 환경에서도 무너지지 않는 백엔드 설계를 지향합니다."**

---

## 0. 프로젝트 개요

### 0-1. 프로젝트 목적
PhotoProject는 Spring Boot 기반의 REST API 포트폴리오입니다.  
기본적인 기능 구현을 전제로,<br>
실제 운영 환경에서 문제가 될 수 있는 성능 병목, 동시성 이슈, 데이터 정합성 문제를<br>
설계 단계에서부터 분석하고 개선하는 데 목적을 두었습니다.

이를 통해 본 프로젝트는,<br>
트래픽 증가와 동시 요청 상황에서도 안정성을 유지할 수 있는<br>
백엔드 구조를 설계하는 것을 핵심 목표로 합니다.


### 0-2. README 작성 의도
본 README는 구현된 기능을 나열하기 위한 목적이 아닌,<br>
개발 과정에서 드러난 운영 관점의 문제를 어떻게 식별하고,<br>
어떤 판단을 통해 개선했는지를 설명하기 위해 작성되었습니다.<br>

각 개선 항목은 문제의 성격과 영향 범위를 먼저 정의한 뒤,<br>
실제 재현 조건을 기준으로 분석하고,<br>
개선 적용 후에는 로그, 쿼리 실행 수, 응답 시간 등의 지표를 통해<br>
개선 전·후의 차이를 확인할 수 있도록 구성되어 있습니다.<br>


### 0-3. 핵심 역량 및 기술 요약
- **Backend**: Java 21, Spring Boot 기반 REST API 설계
- **Security**: JWT를 활용한 Stateless 인증·인가 구조
- **Performance**: N+1 문제 및 조회 경로의 비효율성을 중심으로 한 성능 개선
- **Reliability**: 동시성 상황에서의 Race Condition 및 데이터 정합성 이슈 분석


---

## 1. 주요 개선 및 트러블슈팅 (Highlights)
본 섹션에서는 PhotoProject 개발 과정에서 운영 환경을 기준으로 확인된 주요 문제와<br>
이에 대한 개선 방향 및 검증 결과를 요약합니다.

각 항목은 이후 섹션에서<br>
문제 정의 → 재현 조건 → 개선 접근 → 검증 결과의 흐름으로
상세히 다루고 있습니다.

| 주요 이슈 | 개선 방향                    | 검증 기준 |
| --- |--------------------------| --- |
| 게시글 좋아요/조회수 처리 시 정합성 붕괴 가능성 | DB 제약 조건 및 트랜잭션 경계 재정의   | 중복 데이터 미발생 여부 |
| 게시글 목록/상세 조회 시 N+1 문제 | 조회 목적별 쿼리 분리 및 연관 관계 최적화 | 쿼리 실행 수, 응답 시간 비교 |
| 인증/인가 실패 시 처리 흐름 불명확 | JWT 필터 레벨에서 예외 흐름 통합     | 인증 실패 시 응답 일관성 |
| 도메인 간 책임 경계 불명확 | 서비스 계층 책임 분리             | 로직 변경 영향 범위 |


---

## 2. 기술 스택 (Tech Stack)

### Core
- **Java 21**
- **Spring Boot**

### Security
- **Spring Security**
- **JWT**

### Database
- **MySQL**

### Build & Tooling
- **Gradle**
- **Postman**
[^memo]: 추 후 보강 예정

---

## 3. 프로젝트 구조 (Architecture)

PhotoProject는 도메인(User / Post / Comment) 단위로 기능을 분리하고,<br>
각 도메인 내부에서 Controller / Service / Repository / DTO / Entity 계층을 분리하여<br>
책임을 명확히 구분하는 구조를 사용합니다.

인증·인가, 공통 응답, 예외 처리 등 전역 관심사는 `global` 영역으로 분리하여<br>
비즈니스 로직과의 결합도를 낮추는 것을 목표로 구성했습니다.

[^memo]: 패키지 구조 및 상세 설명은 README 최종 정리 단계에서 실제 코드 기준으로 확정합니다.


---

## 4. 주요 개선 사례 (Case Study)

본 섹션에서는 PhotoProject의 운영 과정에서 직면한 주요 이슈를 사례별로 정리했습니다.<br>
각 사례는 문제 정의부터 검증 결과에 이르는 일련의 해결 과정을 담고 있으며,<br>
상세 내용은 하단의 개별 문서를 통해 확인하실 수 있습니다.

---

### 4-1. 게시글 조회 성능 개선 (N+1 문제)

#### 문제 상황
- 게시글 목록 및 상세 조회 시 연관 엔티티 접근으로 인해
  다수의 추가 쿼리가 발생하는 문제 확인

#### 개선 접근
- 조회 목적에 따라 쿼리를 분리하고,
  연관 관계 조회 방식을 조정하여 불필요한 쿼리 실행을 최소화

#### 검증 결과
- 조회 시 실행 쿼리 수 감소
- 응답 시간 개선 확인

👉 **[상세 분석 문서 보기](docs/4-1case-n-plus-one.md)**

---

### 4-2. 좋아요 기능 동시성 문제 개선

#### 문제 상황
- 다중 요청 환경에서 좋아요 중복 저장 가능성 확인
- 결과적으로 데이터 정합성 붕괴 위험 존재

#### 개선 접근
- 트랜잭션 경계 재정의 및
  데이터 무결성을 보장할 수 있는 제약 조건 적용

#### 검증 결과
- 동시 요청 상황에서 중복 데이터 미발생 확인
- 정합성 유지 여부 검증

👉 **[상세 분석 문서 보기](docs/case-concurrency-like.md)**

---

### 4-3. 인증·인가 예외 처리 흐름 개선

#### 문제 상황
- 인증 및 권한 실패 시 예외 처리 흐름이 분산되어
  응답 구조가 일관되지 않음

#### 개선 접근
- 인증·인가 예외 처리를 필터 레벨에서 일원화하여
  공통 응답 구조로 통합

#### 검증 결과
- 인증 실패 시 응답 형식 일관성 확보
- 예외 처리 흐름 단순화

👉 **[상세 분석 문서 보기](docs/case-auth-exception.md)**