<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"> <!-- 문자인코딩 UTF-8 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- IE 호환 모드 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 반응형 -->
    <title>게시글 목록 | PhotoProject</title> <!-- 브라우저 탭 제목 -->

    <link rel="stylesheet" th:href="@{/css/main.css}"> <!-- 공통 CSS 로드 -->
</head>

<body>
<!-- 상단 헤더(공통 프래그먼트) -->
<div th:replace="~{layout/fragments/header :: header}"></div>

<main class="container">
    <section class="card">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
            <div>
                <h1>게시글 목록</h1>
                <p class="muted mt-1">UI 최소 검증용입니다. (목록 → 상세/작성으로 확장)</p>
            </div>

            <!-- 작성 화면 이동 -->
            <a class="btn btn-primary" th:href="@{/ui/posts/write}">글 작성</a>
        </div>

        <!-- 검색/필터는 다음 단계에서 붙일 예정(현재는 UI 골격만) -->
        <!--
        <div class="mt-2" style="display:flex; gap:10px; align-items:center;">
            <input type="text" placeholder="검색어" style="flex:1; padding:10px 12px; border:1px solid #ccc; border-radius:6px;">
            <button class="btn btn-ghost" type="button">검색</button>
        </div>
        -->

        <div class="mt-3">
            <!-- posts 데이터가 있을 때 -->
            <div th:if="${posts != null and !posts.isEmpty()}">
                <table style="width:100%; border-collapse:collapse;">
                    <thead>
                    <tr style="text-align:left; border-bottom:1px solid #eee;">
                        <th style="padding:10px 8px;">번호</th>
                        <th style="padding:10px 8px;">제목</th>
                        <th style="padding:10px 8px;">작성자</th>
                        <th style="padding:10px 8px;">작성일</th>
                        <th style="padding:10px 8px;">좋아요</th>
                        <th style="padding:10px 8px;">조회</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:each="post : ${posts}" style="border-bottom:1px solid #f2f2f2;">
                        <td style="padding:10px 8px;" th:text="${post.id}">1</td> <!-- 게시글 ID -->
                        <td style="padding:10px 8px;">
                            <a th:href="@{/ui/posts/{id}(id=${post.id})}" th:text="${post.title}">제목</a> <!-- 상세로 이동 -->
                        </td>
                        <td style="padding:10px 8px;" th:text="${post.authorName}">작성자</td> <!-- 작성자 -->
                        <td style="padding:10px 8px;" th:text="${post.createdAt}">2025-12-16</td> <!-- 작성일(형식은 다음 단계에서 가공) -->
                        <td style="padding:10px 8px;" th:text="${post.likeCount}">0</td> <!-- 좋아요 수 -->
                        <td style="padding:10px 8px;" th:text="${post.views}">0</td> <!-- 조회수 -->
                    </tr>
                    </tbody>
                </table>

                <!-- 페이징 버튼(Prev/Next) -->
                <div class="mt-3" style="display:flex; justify-content:center; align-items:center; gap:10px;">
                    <!-- 이전 페이지 버튼 -->
                    <a class="btn btn-ghost"
                       th:if="${page != null and !page.first}"
                       th:href="@{/ui/posts(page=${page.number - 1}, size=${page.size})}">
                        Prev
                    </a>
            </div>

                <!-- 현재 페이지 정보 (page.number는 0부터라 +1 표시) -->
                <span class="muted"
                      th:if="${page != null}"
                      th:text="'Page ' + (${page.number} + 1) + ' / ' + ${page.totalPages}">
                        Page 1 / 1
                    </span>

                <!-- 다음 페이지 버튼 -->
                <a class="btn btn-ghost"
                   th:if="${page != null and !page.last}"
                   th:href="@{/ui/posts(page=${page.number + 1}, size=${page.size})}">
                    Next
                </a>
            </div>
        </div>

            <!-- posts 데이터가 없을 때(초기 상태) -->
            <div th:if="${posts == null or posts.isEmpty()}" class="text-center mt-3">
                <p class="muted">아직 표시할 게시글이 없습니다.</p>
                <a class="btn btn-primary mt-2" th:href="@{/ui/posts/write}">첫 글 작성하기</a>
            </div>
        </div>
    </section>
</main>

<!-- 하단 푸터(공통 프래그먼트) -->
<!--<div th:replace="~{layout/fragments/footer :: footer}"></div> -->

</body>
</html>
